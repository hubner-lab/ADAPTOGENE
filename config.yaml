#=============================================================================
# ADAPTOGENE Configuration
#=============================================================================

#-----------------------------------------------------------------------------
# INPUT: Files and project settings
#-----------------------------------------------------------------------------
INPUT_DIR: "data/"              # Directory containing input files
INPUT_VCF: 'Test.vcf'           # VCF file (supports .vcf and .vcf.gz)
INPUT_METADATA: 'Test_metadata.tsv'  # Sample metadata (site, sample, latitude, longitude)
INPUT_GFF: 'Test.gff3'          # GFF file for gene annotation
PROJECT_NAME: 'TEST'            # Output directory prefix: {PROJECT_NAME}_results/
CPU: 10                         # Number of CPU cores to use

#-----------------------------------------------------------------------------
# FILTER: VCF quality filtering (affects variant and sample retention)
#-----------------------------------------------------------------------------
FILTER_MAF: 0.05                # Minor allele frequency threshold (remove rare variants)
FILTER_SNP_MISS: 0.1            # Max SNP missingness (remove SNPs missing in >10% samples)
FILTER_SAMPLE_MISS: 0.5         # Max sample missingness (remove samples with >50% missing)

#-----------------------------------------------------------------------------
# LD: Linkage disequilibrium pruning (reduces redundant correlated SNPs)
#-----------------------------------------------------------------------------
LD_WINDOW: 100                  # Window size in kb for LD calculation
LD_STEP: 20                     # Step size for sliding window
LD_R2: 0.2                      # R² threshold (keep SNPs with r² < this value)

#-----------------------------------------------------------------------------
# SNMF: Population structure inference (ancestry proportions)
#-----------------------------------------------------------------------------
SNMF_K_START: 3                 # Minimum K (number of ancestral populations) to test
SNMF_K_END: 7                   # Maximum K to test
SNMF_K_BEST: 5                  # Selected K for downstream analyses (set after reviewing cross-entropy)
SNMF_PLOIDY: 2                  # Ploidy level (2 for diploid)
SNMF_REPEATS: 10                # Number of repetitions per K (higher = more stable)

#-----------------------------------------------------------------------------
# MAP: Geographic extent and resolution for climate data
#-----------------------------------------------------------------------------
MAP_CROP_REGION: "auto"         # Coordinates [min_lon, max_lon, min_lat, max_lat] or "auto"
MAP_GAP: 0.5                    # Buffer around samples in degrees (only used if auto)
MAP_RESOLUTION: 0.5             # Climate data resolution in arc-minutes (0.5, 2.5, 5, 10)

#-----------------------------------------------------------------------------
# CLIMATE: Bioclimatic variables for association and offset analyses
#-----------------------------------------------------------------------------
CLIMATE_PREDICTORS: "bio_1,bio_2,bio_3,bio_4,bio_8,bio_9,bio_10,bio_12,bio_14,bio_15"

#-----------------------------------------------------------------------------
# POP: Population-level statistics (require >=3 samples per population)
#-----------------------------------------------------------------------------
POP_CALC_STATS: FALSE           # Calculate Tajima's D, Pi, AMOVA, IBD (set FALSE if <3 samples/pop)
POP_WINDOW_SIZE: 3000000        # Window size in bp for Tajima's D and Pi diversity
POP_CUSTOM_TRAIT: 'NULL'        # Custom trait file for piemap sizing (site + trait columns)

#-----------------------------------------------------------------------------
# PIEMAP: Population structure visualization on maps
#-----------------------------------------------------------------------------
PIEMAP_ALPHA: 0.6               # Pie chart transparency (0-1)
PIEMAP_SHOW_LABELS: 'F'         # Show population labels (T/F)
PIEMAP_LABEL_SIZE: 8            # Label font size

#-----------------------------------------------------------------------------
# ASSOC: Association analysis settings (GWAS/GEA)
#-----------------------------------------------------------------------------
ASSOC_SCATTERMORE_THRESHOLD: 30000  # Use fast scattermore rendering when SNPs > this

ASSOC_CONFIGS:                  # Methods and significance thresholds
  - METHOD: "EMMAX"             # EMMAX: mixed model, accounts for population structure
    ADJUST: "bonf"              # Correction: bonf (Bonferroni) or qval (FDR)
    THRESHOLD: '0.05'
  - METHOD: "LFMM"              # LFMM: latent factor mixed model
    ADJUST: "bonf"
    THRESHOLD: '0.05'

ASSOC_COMBINE_METHOD: 'Sum'     # How to combine methods: Sum/Overlap/EMMAX/LFMM
ASSOC_COMBINE_GAP: 100000       # Max distance (bp) to consider SNPs overlapping
ASSOC_SNP_DISTANCE: 100000      # Distance to merge nearby significant SNPs
ASSOC_REGION_DISTANCE: 2000000  # Distance to merge SNPs into genomic regions
ASSOC_TOP_REGIONS: 10           # Top N regions for gene analysis (0 = all)
ASSOC_GENE_DISTANCE: 1000000    # Distance from SNP to search for genes
ASSOC_PROMOTER_LENGTH: 10000    # Promoter region length for SNP annotation
ASSOC_GO_FIELD: 'ontology'      # GFF attribute with GO terms (NULL to skip enrichment)

#-----------------------------------------------------------------------------
# GFF: Gene annotation parsing
#-----------------------------------------------------------------------------
GFF_FEATURE: 'mRNA'             # Feature type to extract (mRNA, gene, CDS, etc.)
GFF_GENE_NAME: 'description'    # Attribute for gene names
GFF_BIOTYPE: 'biotype'          # Attribute for gene biotype

#-----------------------------------------------------------------------------
# REGIONPLOT: Detailed visualization of genomic regions
#-----------------------------------------------------------------------------
REGIONPLOT_REGION: "chr3H:108816722-117816722"  # Region to plot (chr:start-end)
REGIONPLOT_TRAITS: 'GS_Mean_Mbp,Grain_weight'   # Traits to display
REGIONPLOT_METHOD: 'EMMAX'      # Association method for p-values
REGIONPLOT_GENES: 'all'         # Genes to label: all/nameless/gene1|gene2

#-----------------------------------------------------------------------------
# FUTURE: Climate projections for maladaptation analysis
#-----------------------------------------------------------------------------
FUTURE_SSP: '585'               # Shared Socioeconomic Pathway (126, 245, 370, 585)
FUTURE_YEAR: '2061-2080'        # Time period for projections
FUTURE_MODELS: 'MPI-ESM1-2-HR,UKESM1-0-LL,IPSL-CM6A-LR'  # Climate models to average

#-----------------------------------------------------------------------------
# GF: Gradient Forest modeling for genetic offset
#-----------------------------------------------------------------------------
GF_NTREE: '1000'                # Number of trees (higher = more accurate, slower)
GF_COR_THRESHOLD: '0.5'         # Correlation threshold for variable selection
GF_PCNM: 'with'                 # Include spatial variables: with/without
GF_SUFFIX: 'EMMAX_bonf005'      # Unique identifier for this GF run
GF_RANDOM_MODEL: TRUE           # Also build neutral model for comparison
